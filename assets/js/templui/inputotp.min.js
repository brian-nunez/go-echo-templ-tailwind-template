(()=>{typeof window.inputOTPState>"u"&&(window.inputOTPState=new WeakMap);(function(){if(window.inputOTPSystemInitialized)return;function p(i){if(!i||i.hasAttribute("data-initialized"))return;i.setAttribute("data-initialized","true");let l=i.querySelector("[data-tui-inputotp-value-target]"),n=Array.from(i.querySelectorAll("[data-tui-inputotp-slot]")).sort((t,e)=>parseInt(t.getAttribute("data-tui-inputotp-index"))-parseInt(e.getAttribute("data-tui-inputotp-index")));if(!l||n.length===0)return;i.hasAttribute("autofocus")&&requestAnimationFrame(()=>{let t=n[0];t&&(t.focus(),t.select())});let u=()=>{l.value=n.map(t=>t.value).join("")},f=()=>n.findIndex(t=>!t.value),s=t=>{t>=0&&t<n.length&&(n[t].focus(),setTimeout(()=>n[t].select(),0))},v=t=>{let e=t.target,a=parseInt(e.getAttribute("data-tui-inputotp-index"));if(e.value===" "){e.value="";return}e.value.length>1&&(e.value=e.value.slice(-1)),e.value&&a<n.length-1&&s(a+1),u()},g=t=>{let e=t.target,a=parseInt(e.getAttribute("data-tui-inputotp-index"));if(t.key==="Backspace"){let o=e.value;a>0&&(t.preventDefault(),o?(e.value="",u(),s(a-1)):(n[a-1].value="",u(),s(a-1)))}else t.key==="ArrowLeft"&&a>0?(t.preventDefault(),s(a-1)):t.key==="ArrowRight"&&a<n.length-1&&(t.preventDefault(),s(a+1))},h=t=>{let e=t.target,a=parseInt(e.getAttribute("data-tui-inputotp-index")),o=f();if(o!==-1&&a!==o){s(o);return}setTimeout(()=>e.select(),0)},w=t=>{t.preventDefault();let a=(t.clipboardData||window.clipboardData).getData("text").replace(/\s/g,"").split(""),o=0,I=n.find(r=>r===document.activeElement);I&&(o=parseInt(I.getAttribute("data-tui-inputotp-index")));for(let r=0;r<a.length&&o<n.length;r++)n[o].value=a[r],o++;u();let d=f();d===-1?d=n.length-1:d>0&&d>o&&(d=o),s(Math.min(d,n.length-1))};for(let t of n)t.addEventListener("input",v),t.addEventListener("keydown",g),t.addEventListener("focus",h);i.addEventListener("paste",w);let m=l.id;if(m){for(let t of document.querySelectorAll(`label[for="${m}"]`))if(!t.dataset.inputOtpListener){let e=a=>{a.preventDefault(),n.length>0&&s(0)};t.addEventListener("click",e),t.setAttribute("data-tui-inputotp-listener","true"),t._inputOtpClickListener=e}}if(i.getAttribute("data-tui-inputotp-value")){let t=i.getAttribute("data-tui-inputotp-value");for(let e=0;e<n.length&&e<t.length;e++)n[e].value=t[e];u()}let b={slots:n,hiddenInput:l,handleInput:v,handleKeydown:g,handleFocus:h,handlePaste:w};window.inputOTPState.set(i,b)}function A(i){let l=window.inputOTPState.get(i);if(!l)return;for(let u of l.slots)u.removeEventListener("input",l.handleInput),u.removeEventListener("keydown",l.handleKeydown),u.removeEventListener("focus",l.handleFocus);i.removeEventListener("paste",l.handlePaste);let n=l.hiddenInput.id;if(n)for(let u of document.querySelectorAll(`label[for="${n}"]`))u._inputOtpClickListener&&(u.removeEventListener("click",u._inputOtpClickListener),delete u._inputOtpClickListener,u.removeAttribute("data-tui-inputotp-listener"));window.inputOTPState.delete(i)}function c(i=document){i instanceof Element&&i.matches("[data-tui-inputotp]")&&p(i),i.querySelectorAll("[data-tui-inputotp]:not([data-initialized])").forEach(p)}window.templUI=window.templUI||{},window.templUI.inputOTP={init:c,cleanup:A},document.addEventListener("DOMContentLoaded",()=>c()),window.inputOTPSystemInitialized=!0})();})();
